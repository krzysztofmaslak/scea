<html>
	<head>
		<title>Krzysztof Maslak - OCEA Assignment</title>
		<style type="text/css">
			#content {margin: 10px;}
			#header {width: 500px;}
			#tblCnt { width: 450px; }
			#tblCnt td { background:none; }
			#tblCnt table {margin-bottom:0px;}
			#content h3 {margin-bottom:4px; margin-top:10px;}
			.mitigationTitle {font-weight:bold;}
		</style>
		<link rel="stylesheet" href="stylesheet.css"></link>
	</head>
	<body>
		<div id="content">
		<table id="header">
			<tr>
				<td>Title</td>
				<td>Assignment for Oracle Certified Enterprise Architect</td>
			</tr>
			<tr>
				<td>Name</td>
				<td>Krzysztof Maslak</td>
			</tr>
			<tr>
				<td>Accompanied documents</td>
				<td><a href="TeamDoctor.pdf">Requirements Document</a><td>
			</tr>
			<tr>
				<td>Notes</td>
				<td>To view diagrams First 'click to enlarge'</td>
			</tr>
		</table>
		<div id="tblCnt">
			<h3>Table of Contents</h3>
			<table>
				<tr>
					<td><span>1. <a href="#assumptions">Assumptions</a></span></td>
				</tr>
				<tr>
					<td><span>2. <a href="#sysoverview">Brief System Overview</a></span></td>
				</tr>
				<tr>
					<td><span>3. <a href="#classdiag">Class Diagram</a></span></td>
				</tr>
				<tr>
					<td><span>4. <a href="#compdiag">Component Diagram</a></span></td>
				</tr>
				<tr>
					<td><span>5. <a href="#depdiag">Deployment Diagram</a></span></td>
				</tr>
				<tr>
					<td><span>6. <a href="#seqdiag">Sequence Diagrams</a></span>
					<table>
						<tr>
							<td><span>6.1. <a href="#postreq">Post Request</a></span></td>
						</tr>
						<tr>
							<td><span>6.2. <a href="#provadv">Provide Advice</a></span></td>
						</tr>
						<tr>
							<td><span>6.3. <a href="#postclar">Review Advice, Request Clarification</a></span></td>
						</tr>
						<tr>
							<td><span>6.4. <a href="#respreq">Respond to Additional Request</a></span></td>
						</tr>
					</table>
					</td>
				</tr>
				<tr>
					<td><span>7. <a href="#riskmit">Risks and Mitigations</a></span></td>
				</tr>
			</table>
		</div>
		<div id="assumptions">
			<a name="assumptions"></a><h3>1. Assumptions</h3>
			<ul>
				<li>Every Doctor can act as a consultant providing advice in his specialisation field.</li>
				<li>Recording of agreed and implemented recommendations (X-rays, prescriptions, patient history) will be done through external system. All new data, attached to doctor's request, will be available through TeamDoctor solution in read-only mode when reviewing request.</li>
				<li>Example system infrastructure requirements described in deployment diagram are based on the assumption that every hospital have 1000 active users (doctors or consultants) which gives 20 000 users for the whole system.</li>
				<li>Data provided from external rich content system is in binary form, data provided from prescription and patient history systems is in textual form.</li>
			</ul>	
		</div>
		<div id="sysoverview">
			<a name="sysoverview"></a><h3>2. Brief System Overview</h3>
			TeamDoctor system was designed as a Java Enterprise application accessible by end users (doctors or consultants) through web browser. System was designed to be highly available across North America, Europe, Asia with data centres located on those three continents. Provided design allows it to work on 'commodity' computers, not needing any expensive infrastructure, to meet one of the business goals to reduce cost of specialized resources. Data used in TeamDoctor system is stored in synchronous multi-master relational database cluster. Any rich content files attached to request going through the system will be stored in RDBS in form of metadata and the file content will be replicated across data centres in secure, durable way using asynchronous messages with JMS technology and stored on local hard drives. TeamDoctor solution was designed to use JDBC in data access layer.	
				
		</div>
		<div id="classdiag">
			<a name="classdiag"></a><h3>3. Class Diagram</h3>
			<img src="class_diagram.jpg" style="width:900px;"/><br/>
			<a href="class_diagram.jpg">Click to enlarge</a>
		</div>
		<div id="compdiag">
			<a name="compdiag"></a><h3>4. Component Diagram</h3>
			<img src="component_diagram.jpg" style="width:900px;" /><br/>
			<a href="component_diagram.jpg">Click to enlarge</a>
		</div>
		<div id="depdiag">
			<a name="depdiag"></a><h3>5. Deployment Diagram</h3>		
			<img src="deployment_diagram.jpg" style="width:900px;"/><br/>
			<a href="deployment_diagram.jpg">Click to enlarge</a>
		</div>
		<div id="seqdiag">
			<a name="seqdiag"></a><h3>6. Sequence Diagrams</h3>
			<div id="postreq">
				<a name="postreq"></a><h4>6.1. Post Request</h4>
				<img src="post_request_seq_diagram.jpg" style="width:900px;"/><br/>
				<a href="post_request_seq_diagram.jpg">Click to enlarge</a>
			</div>
			<div id="provadv">
				<a name="provadv"></a><h4>6.2. Provide Advice</h4>
				<img src="provide_advice_seq_diagram.jpg" style="width:900px;"/><br/>
				<a href="provide_advice_seq_diagram.jpg">Click to enlarge</a>
			</div>
			<div id="postclar">
				<a name="postclar"></a><h4>6.3. Review Advice, Request Clarification</h4>
				<img src="review_request_clarification_seq_diagram.jpg" style="width:900px;"/><br/>
				<a href="review_request_clarification_seq_diagram.jpg">Click to enlarge</a>
			</div>
			<div id="respreq">
				<a name="respreq"></a><h4>6.4. Respond to Additional Request</h4>
				<img src="respond_to_additional_request_seq_diagram.jpg" style="width:900px;"/><br/>
				<a href="respond_to_additional_request_seq_diagram.jpg">Click to enlarge</a>
			</div>
		</div>
		<div id="riskmit">
			<a name="riskmit"></a><h3>7. Risks and Mitigations</h3>
			<ul>
				<li>
					More hospitals can join the program.<br/>
					<div class="mitigation"><span class="mitigationTitle">Mitigation:</span> Provided architecture allows both vertical as well as horizontal scalling. In case of experienced slowness in clustered database due to increased number of active users caching system can be introduced.</div>
				</li>
				<li>
					File in external system was updated after request was created. Issue here is that system was designed to by highly available, data is stored in clustered RDBS but files are replicated using asynchronous messages. Request itself may be available to review in a given data center but files might not yet be replicated, which will cause TeamDoctor system to make a request to external system to download again attached file. Downloaded file might be different then file attached when creating request.<br/>
					<div class="mitigation"><span class="mitigationTitle">Mitigation:</span>Fallback to try to download file from external system in case of missing file locally was included in sequence diagrams but specific handling for this issue was not as this is exceptional case. When trying to view not in sync file update request status to canceled and send cancelation message to user that created the request.</div>
				</li>
				<li>
					New file attached to request (X-ray or MRI scan), that does not exist yet in external system, is not available/was not replicated yet in other data center when reviewing request.
					<div class="mitigation"><span class="mitigationTitle">Mitigation:</span> The issue was not included in sequence diagrams, as this is less likely scenario as data centres operate in different time zones, their business hours are different. As a mitigation though, user should be presented with loading panel and explicit message. Cometd technology could be used to check file availability and in case of successful replication file could be displayed to end user.</div> 
				</li>
				<li>
					Data center can incur technical problems.<br/>
					<div class="mitigation"><span class="mitigationTitle">Mitigation:</span> Described above architecture will allow system to fallback to remaining data centres without serious interruption. One inconvenience will be that users that were using data center that failed will have to login again to TeamDoctor system.</div>
				</li>
			</ul>
		</div>
		</div>
	</body>
</html>
